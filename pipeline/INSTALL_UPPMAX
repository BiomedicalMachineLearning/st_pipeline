To install the st_pipeline on Uppmax follow the instructions below:

1) log in on milou

2) run the command:
    /home/dahlo/uppmaxScripts/pythonVirtualEnv/python-virtualenv-installer

3) logout

4) log in again

5) run the command:
    module unload python && mkvirtualenv --no-site-packages --python=/sw/comp/python/2.7_kalkyl/bin/python devel

6) run the commands:
    pip install numpy
    pip install pysam
    pip install HTSeq

7) Install FindIndexes if not installed already :

	cd pipeline/dependencies/findIndexes
	mkdir build
	cd build
	cmake ../
	make
	cp findIndexes /path/to/binaries (folder where you can install binaries present in your PATH)

8) Install bowtie2 (not needed but this will install newer version) :

	cd pipeline/dependencies/bowtie2-sources
	make
	cp bowtie2* /path/to/binaries

9) download the pipeline file on your computer from:
    https://docs.google.com/a/scilifelab.se/file/d/0B5uSKaLRpzQZS2x6M3NBQ1NSaWM/edit?usp=sharing

10) copy zip-file to your uppmax home folder

11) unzip the file on uppmax
    password: avgohe52 

12) run the commands:
      cd pipeline
      python setup.py build
      python setup.py install

13) test by running the command:
      st_pipeline_run.py

     The output it should look like this:

     usage: st_pipeline_run.py [-h] [--output-folder OUTPUT_FOLDER] [--ids IDS]
                          [--ref-map REF_MAP]
                          [--ref-annotation REF_ANNOTATION]
                          [--expName EXPNAME]
                          [--allowed-missed ALLOWED_MISSED]
                          [--allowed-kimer ALLOWED_KIMER]
                          [--min-length-qual-trimming MIN_LENGTH_QUAL_TRIMMING]
                          [--mapping-fw-trimming MAPPING_FW_TRIMMING]
                          [--mapping-rv-trimming MAPPING_RV_TRIMMING]
                          [--length-id LENGTH_ID]
                          [--contaminant-bowtie2-index CONTAMINANT_BOWTIE2_INDEX]
                          [--qual-64] [--htseq-mode HTSEQ_MODE]
                          [--htseq-no-ambiguous] [--start-id START_ID]
                          [--error-id ERROR_ID] [--no-clean-up] [--verbose]
                          [--bowtie-threads BOWTIE_THREADS]
                          [--min-quality-trimming MIN_QUALITY_TRIMMING]
                          [--discard-fw] [--discard-rv] [--bowtie2-discordant]
                          [--bin-path BIN_PATH] [--log-file LOG_FILE]
                          input input
     st_pipeline_run.py: error: too few arguments
